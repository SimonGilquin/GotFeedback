@using GotFeedback.Controllers
@model IEnumerable<Topic>

@{
  ViewBag.Title = "Hot new topics";
}

<h2 class="h3">Hot new topics</h2>
@using (Html.BeginForm("Search", "Topics", FormMethod.Post, new { @class = "" }))
{
  @Html.AntiForgeryToken()
  <div class="input-group">
    <input type="text" name="searchString" class="form-control" placeholder="search for a topic" required="required" />
    <span class="input-group-btn">
      <input type="submit" value="Search" class="btn btn-primary" />
    </span>
  </div>
}

<div class="row">
  <div class="col-md-4">
    <a href="@Url.Action("New" , "Topics")" class="btn btn-block btn-success">New topic <span class="glyphicon glyphicon-plus"></span></a>
  </div>
  <div class="col-md-4">
    <a href="@Url.Action("New", "Topics", new { order = TopicsOrderBy.CreatedDate })" class="btn btn-block btn-primary">View newest <span class="glyphicon glyphicon-flash"></span></a>
  </div>
  <div class="col-md-4">
    <a href="@Url.Action("New", "Topics", new { order = TopicsOrderBy.ViewCount })" class="btn btn-block btn-danger">View hottest <span class="glyphicon glyphicon-fire"></span></a>
  </div>
</div>

@foreach (var item in Model)
{
  <table class="table-responsive" style="margin-top: 5px;margin-bottom: 5px">
    <tr>
      <th>
        <div>
          @Html.ActionLink(@item.Title, "Details", new { id = item.Id })
        </div>
      </th>
    </tr>

    <tr>
      <td>
        <div class="">
          @foreach (var topicTag in item.Tags)
          {
            <a class="post-tag" rel="tag" title="" href="#">@topicTag.Label</a>
          }
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class="btn-group pull-right">
          <button type="submit" class="btn btn-default" onclick="location.href='@Url.Action("AddLike", "Topics", new { id = item.Id })'">
            (+@item.LikesCount)&nbsp;<i class="glyphicon glyphicon-thumbs-up"></i>
          </button>
          <button type="button" class="btn btn-default" onclick="location.href='@Url.Action("AddLike", "Topics")'">
            <i class="fa fa-question"></i>
          </button>
          <button type="button" class="btn btn-default" onclick="location.href='@Url.Action("New", "Comments")'">
            <i class="fa fa-comment"></i>
          </button>
        </div>
      </td>

    </tr>
  </table>
}
